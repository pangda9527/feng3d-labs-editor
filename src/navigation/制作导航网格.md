# 制作导航网格方案

## 需求

    参考unity3d在编辑器中标记可行走模型对象，生成导航网格

### 需求 
1. 允许行走坡度   （max Slope）
2. 距离边缘半径   （agent Radius）
3. 允许行走高度   （agent Height）

## 思路一 
1. 获取模型每个模型三角形数据
2. 通过计算三角形面法线执行（max Slope）判定剔除三角形                                   ---- 实现需求（允许行走坡度）
3. 遍历所有三角形获取所有边缘边（只被一个三角形拥有的边）
4. 遍历所有边缘边执行 边缘边两个顶点向第三个顶点扩张（agent Radius）距离生成新顶点（新三角形）               ---- 实现需求（距离边缘半径）
5. 遍历所有三角形 执行顶点的（agent Height）判定，剔除所有顶点不通过测试的三角形，通过所有顶点通过测试的三角形，过滤出部分顶点通过测试的三角形。
6. 针对筛选出的三角形中的不通过测试的顶点向三角形中通过测试的顶点进行移动，找到线段上刚好满足条件的点，然后生成新三角形       ---- 实现需求（允许行走高度）

## 思路二
1. 使用合并几何体生成的模型作为初始导航网格
2. 剔除法线与（0,1,0）夹角大于（max Slope）的三角形                          ---- 实现需求（允许行走坡度）
3. 获取所有边缘边
4. 使用导航网格模型 减去 所有边缘边形成圆柱体（以边缘边为轴心，（agent Radius）为半径）                                ---- 实现需求（距离边缘半径）
5. 遍历三角形与-y方向偏移（agent Height）的三角形形成三棱柱
6. 使用导航网格 减去 所有三棱柱                                                                  ---- 实现需求（允许行走高度）

### 需求关键技术
1. 几何体的合并、裁剪等操作